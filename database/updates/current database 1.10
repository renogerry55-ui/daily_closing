<?xml version="1.0" encoding="utf-8"?>
<!--
- phpMyAdmin XML Dump
- version 5.2.1
- https://www.phpmyadmin.net
-
- Host: 127.0.0.1
- Generation Time: Oct 01, 2025 at 05:19 AM
- Server version: 10.4.32-MariaDB
- PHP Version: 8.2.12
-->

<pma_xml_export version="1.0" xmlns:pma="https://www.phpmyadmin.net/some_doc_url/">
    <!--
    - Structure schemas
    -->
    <pma:structure_schemas>
        <pma:database name="daily_closing" collation="utf8mb4_general_ci" charset="utf8mb4">
            <pma:table name="hq_batches">
                CREATE TABLE `hq_batches` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `manager_id` int(11) NOT NULL,
                  `report_date` date NOT NULL,
                  `status` enum(&#039;submitted&#039;,&#039;approved&#039;,&#039;rejected&#039;,&#039;recorded&#039;) NOT NULL DEFAULT &#039;submitted&#039;,
                  `overall_total_income` decimal(14,2) NOT NULL DEFAULT 0.00,
                  `overall_total_expenses` decimal(14,2) NOT NULL DEFAULT 0.00,
                  `overall_balance` decimal(14,2) NOT NULL DEFAULT 0.00,
                  `notes` text DEFAULT NULL,
                  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
                  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
                  PRIMARY KEY (`id`),
                  KEY `idx_hq_batches_mgr_date` (`manager_id`,`report_date`),
                  CONSTRAINT `fk_hq_manager` FOREIGN KEY (`manager_id`) REFERENCES `users` (`id`)
                ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="hq_batch_files">
                CREATE TABLE `hq_batch_files` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `hq_batch_id` int(11) NOT NULL,
                  `file_path` varchar(255) NOT NULL,
                  `original_name` varchar(255) NOT NULL,
                  `mime` varchar(100) DEFAULT NULL,
                  `size_bytes` bigint(20) DEFAULT NULL,
                  `uploaded_at` timestamp NOT NULL DEFAULT current_timestamp(),
                  PRIMARY KEY (`id`),
                  KEY `idx_hq_files_batch` (`hq_batch_id`),
                  CONSTRAINT `fk_hq_files_batch` FOREIGN KEY (`hq_batch_id`) REFERENCES `hq_batches` (`id`) ON DELETE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="hq_batch_submissions">
                CREATE TABLE `hq_batch_submissions` (
                  `hq_batch_id` int(11) NOT NULL,
                  `submission_id` int(11) NOT NULL,
                  PRIMARY KEY (`hq_batch_id`,`submission_id`),
                  KEY `idx_hq_sub_submission` (`submission_id`),
                  CONSTRAINT `fk_hq_sub_batch` FOREIGN KEY (`hq_batch_id`) REFERENCES `hq_batches` (`id`) ON DELETE CASCADE,
                  CONSTRAINT `fk_hq_sub_submit` FOREIGN KEY (`submission_id`) REFERENCES `submissions` (`id`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="outlets">
                CREATE TABLE `outlets` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(100) NOT NULL,
                  `status` enum(&#039;active&#039;,&#039;inactive&#039;) DEFAULT &#039;active&#039;,
                  PRIMARY KEY (`id`),
                  UNIQUE KEY `uq_outlets_name` (`name`)
                ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="receipts">
                CREATE TABLE `receipts` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `submission_id` int(11) NOT NULL,
                  `file_path` varchar(255) NOT NULL,
                  `original_name` varchar(255) NOT NULL,
                  `mime` varchar(100) DEFAULT NULL,
                  `size_bytes` bigint(20) DEFAULT NULL,
                  `uploaded_at` timestamp NOT NULL DEFAULT current_timestamp(),
                  PRIMARY KEY (`id`),
                  KEY `idx_receipts_submission` (`submission_id`),
                  CONSTRAINT `fk_receipts_submission` FOREIGN KEY (`submission_id`) REFERENCES `submissions` (`id`) ON DELETE CASCADE
                ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="submissions">
                CREATE TABLE `submissions` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `manager_id` int(11) NOT NULL,
                  `outlet_id` int(11) NOT NULL,
                  `date` date NOT NULL,
                  `status` enum(&#039;pending&#039;,&#039;approved&#039;,&#039;rejected&#039;,&#039;recorded&#039;) NOT NULL DEFAULT &#039;pending&#039;,
                  `total_income` decimal(12,2) NOT NULL DEFAULT 0.00,
                  `total_expenses` decimal(12,2) NOT NULL DEFAULT 0.00,
                  `balance` decimal(12,2) NOT NULL DEFAULT 0.00,
                  `notes` text DEFAULT NULL,
                  `account_comment` text DEFAULT NULL,
                  `submitted_to_hq_at` datetime DEFAULT NULL,
                  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
                  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
                  PRIMARY KEY (`id`),
                  KEY `idx_submissions_outlet_date` (`outlet_id`,`date`),
                  KEY `idx_submissions_status_date` (`status`,`date`),
                  KEY `idx_submissions_manager_date` (`manager_id`,`date`),
                  CONSTRAINT `fk_sub_manager` FOREIGN KEY (`manager_id`) REFERENCES `users` (`id`),
                  CONSTRAINT `fk_sub_outlet` FOREIGN KEY (`outlet_id`) REFERENCES `outlets` (`id`)
                ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="submission_items">
                CREATE TABLE `submission_items` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `submission_id` int(11) NOT NULL,
                  `type` enum(&#039;income&#039;,&#039;expense&#039;) NOT NULL,
                  `category` varchar(64) NOT NULL,
                  `amount` decimal(12,2) NOT NULL,
                  `description` text DEFAULT NULL,
                  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
                  PRIMARY KEY (`id`),
                  KEY `idx_items_submission` (`submission_id`,`type`),
                  KEY `idx_items_type_cat` (`type`,`category`),
                  CONSTRAINT `fk_items_submission` FOREIGN KEY (`submission_id`) REFERENCES `submissions` (`id`) ON DELETE CASCADE
                ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="users">
                CREATE TABLE `users` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(100) NOT NULL,
                  `username` varchar(50) NOT NULL,
                  `password_hash` varchar(255) NOT NULL,
                  `role` enum(&#039;manager&#039;,&#039;account&#039;,&#039;finance&#039;,&#039;ceo&#039;,&#039;admin&#039;) NOT NULL,
                  `outlet_id` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id`),
                  UNIQUE KEY `uq_users_username` (`username`),
                  KEY `fk_users_outlet_id` (`outlet_id`),
                  CONSTRAINT `fk_users_outlet` FOREIGN KEY (`outlet_id`) REFERENCES `outlets` (`id`) ON DELETE SET NULL
                ) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="user_outlets">
                CREATE TABLE `user_outlets` (
                  `user_id` int(11) NOT NULL,
                  `outlet_id` int(11) NOT NULL,
                  PRIMARY KEY (`user_id`,`outlet_id`),
                  KEY `fk_uo_outlet` (`outlet_id`),
                  CONSTRAINT `fk_uo_outlet` FOREIGN KEY (`outlet_id`) REFERENCES `outlets` (`id`) ON DELETE CASCADE,
                  CONSTRAINT `fk_uo_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
        </pma:database>
    </pma:structure_schemas>

    <!--
    - Database: 'daily_closing'
    -->
    <database name="daily_closing">
        <!-- Table hq_batches -->
        <table name="hq_batches">
            <column name="id">1</column>
            <column name="manager_id">1</column>
            <column name="report_date">2025-10-01</column>
            <column name="status">submitted</column>
            <column name="overall_total_income">11000.00</column>
            <column name="overall_total_expenses">1010.00</column>
            <column name="overall_balance">9990.00</column>
            <column name="notes"></column>
            <column name="created_at">2025-10-01 10:31:07</column>
            <column name="updated_at">2025-10-01 10:31:07</column>
        </table>
        <!-- Table hq_batch_files -->
        <!-- Table hq_batch_submissions -->
        <table name="hq_batch_submissions">
            <column name="hq_batch_id">1</column>
            <column name="submission_id">1</column>
        </table>
        <table name="hq_batch_submissions">
            <column name="hq_batch_id">1</column>
            <column name="submission_id">2</column>
        </table>
        <!-- Table outlets -->
        <table name="outlets">
            <column name="id">1</column>
            <column name="name">Outlet Marina</column>
            <column name="status">active</column>
        </table>
        <table name="outlets">
            <column name="id">2</column>
            <column name="name">Outlet Tudan</column>
            <column name="status">active</column>
        </table>
        <!-- Table receipts -->
        <table name="receipts">
            <column name="id">1</column>
            <column name="submission_id">2</column>
            <column name="file_path">/uploads/receipts/2025/10/7f0fe32133ed57d39b7f5599e41da7d7.png</column>
            <column name="original_name">Cash_Only_Accounting_Workflow.png</column>
            <column name="mime">image/png</column>
            <column name="size_bytes">111988</column>
            <column name="uploaded_at">2025-10-01 09:00:02</column>
        </table>
        <!-- Table submissions -->
        <table name="submissions">
            <column name="id">1</column>
            <column name="manager_id">1</column>
            <column name="outlet_id">1</column>
            <column name="date">2025-10-01</column>
            <column name="status">pending</column>
            <column name="total_income">10000.00</column>
            <column name="total_expenses">1000.00</column>
            <column name="balance">9000.00</column>
            <column name="notes">no image</column>
            <column name="account_comment">NULL</column>
            <column name="submitted_to_hq_at">2025-10-01 10:31:07</column>
            <column name="created_at">2025-10-01 08:59:38</column>
            <column name="updated_at">2025-10-01 10:31:07</column>
        </table>
        <table name="submissions">
            <column name="id">2</column>
            <column name="manager_id">1</column>
            <column name="outlet_id">2</column>
            <column name="date">2025-10-01</column>
            <column name="status">pending</column>
            <column name="total_income">1000.00</column>
            <column name="total_expenses">10.00</column>
            <column name="balance">990.00</column>
            <column name="notes">testing</column>
            <column name="account_comment">NULL</column>
            <column name="submitted_to_hq_at">2025-10-01 10:31:07</column>
            <column name="created_at">2025-10-01 09:00:02</column>
            <column name="updated_at">2025-10-01 10:31:07</column>
        </table>
        <!-- Table submission_items -->
        <table name="submission_items">
            <column name="id">1</column>
            <column name="submission_id">1</column>
            <column name="type">income</column>
            <column name="category">Berhad</column>
            <column name="amount">10000.00</column>
            <column name="description">NULL</column>
            <column name="created_at">2025-10-01 08:59:38</column>
        </table>
        <table name="submission_items">
            <column name="id">2</column>
            <column name="submission_id">1</column>
            <column name="type">expense</column>
            <column name="category">Staff Advance</column>
            <column name="amount">1000.00</column>
            <column name="description">NULL</column>
            <column name="created_at">2025-10-01 08:59:38</column>
        </table>
        <table name="submission_items">
            <column name="id">3</column>
            <column name="submission_id">2</column>
            <column name="type">income</column>
            <column name="category">MP</column>
            <column name="amount">1000.00</column>
            <column name="description">NULL</column>
            <column name="created_at">2025-10-01 09:00:02</column>
        </table>
        <table name="submission_items">
            <column name="id">4</column>
            <column name="submission_id">2</column>
            <column name="type">expense</column>
            <column name="category">Expenses</column>
            <column name="amount">10.00</column>
            <column name="description">NULL</column>
            <column name="created_at">2025-10-01 09:00:02</column>
        </table>
        <!-- Table users -->
        <table name="users">
            <column name="id">1</column>
            <column name="name">Test Manager</column>
            <column name="username">manager1</column>
            <column name="password_hash">$2y$10$HewwLNjXPk.boO9wIuwble3gis.tB0xH3708nxN2P23.o2ZE7b4OW</column>
            <column name="role">manager</column>
            <column name="outlet_id">NULL</column>
        </table>
        <table name="users">
            <column name="id">2</column>
            <column name="name">Test Account</column>
            <column name="username">account1</column>
            <column name="password_hash">$2y$10$HewwLNjXPk.boO9wIuwble3gis.tB0xH3708nxN2P23.o2ZE7b4OW</column>
            <column name="role">account</column>
            <column name="outlet_id">NULL</column>
        </table>
        <table name="users">
            <column name="id">3</column>
            <column name="name">Test Finance</column>
            <column name="username">finance1</column>
            <column name="password_hash">$2y$10$HewwLNjXPk.boO9wIuwble3gis.tB0xH3708nxN2P23.o2ZE7b4OW</column>
            <column name="role">finance</column>
            <column name="outlet_id">NULL</column>
        </table>
        <table name="users">
            <column name="id">4</column>
            <column name="name">Test CEO</column>
            <column name="username">ceo1</column>
            <column name="password_hash">$2y$10$HewwLNjXPk.boO9wIuwble3gis.tB0xH3708nxN2P23.o2ZE7b4OW</column>
            <column name="role">ceo</column>
            <column name="outlet_id">NULL</column>
        </table>
        <table name="users">
            <column name="id">5</column>
            <column name="name">Test Admin</column>
            <column name="username">admin1</column>
            <column name="password_hash">$2y$10$HewwLNjXPk.boO9wIuwble3gis.tB0xH3708nxN2P23.o2ZE7b4OW</column>
            <column name="role">admin</column>
            <column name="outlet_id">NULL</column>
        </table>
        <!-- Table user_outlets -->
        <table name="user_outlets">
            <column name="user_id">1</column>
            <column name="outlet_id">1</column>
        </table>
        <table name="user_outlets">
            <column name="user_id">1</column>
            <column name="outlet_id">2</column>
        </table>
    </database>
</pma_xml_export>
